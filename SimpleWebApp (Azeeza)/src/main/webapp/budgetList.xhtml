<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <style>
      body {
        background-color: #FBEEC1;
      }

      .container {
        position: relative;
      }

      .input-field {
        width: 100%; /* Adjust the width as needed */
      }

<!--      .grid-container {-->
<!--        display: grid;-->
<!--        grid-template-columns: repeat(3, 1fr); /* 2 columns with equal width */-->
<!--        grid-gap: 10px; /* gap between grid items */-->
<!--        margin: 0;-->
<!--        padding: 0;-->
<!--      }-->

      .grid-item {
        //
      }

      .dialog-position {
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }

      .no-border {
        border: none;
        align-items: center;
      }

      footer {
        text-align: center;
      }
    </style>
    <h:outputStylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <h:outputStylesheet href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />
    <h:outputScript src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" />
    <h:outputStylesheet name="primeicons.css" library="primefaces"/>
    <h:outputScript name="primefaces.js" />
    <link rel="icon" href="webapp/images/simple-web-icon-logo.png" type="image/png" />
    <title>Budget List</title>
</h:head>

<h:body>
    <ui:include src="include/topNavigation.xhtml" />
    <div class="container" style="display:flex;">
        <h:form name="searchForm" var="search" id="searchForm">
        <p:panel id="SearchPanel" header="Search for Specific Budget Type" styleClass="no-border">
            <p:panelGrid columns="3">
                <p:column>
                    <p:outputLabel id="search" for="Search" value="Budget Type :" />
                </p:column>
                <p:column>
<!--                    <p:datePicker id="Search" value="${searchbean.searchQuery}" pattern="yyyy-MM-dd" showIcon="true" buttonIcon="pi pi-calendar" styleClass="input-field" />-->
<!--                    <p:inputMask id="Search" value="${searchbean.searchQuery}" mask="9999-99-99" />-->
                    <p:selectOneMenu id="Search" value="${searchbean.searchQuery}">
                        <f:selectItem itemLabel="-- No Selection --" itemValue="" />
                        <f:selectItem itemLabel="Operation Budget" itemValue="Operation Budget" />
                        <f:selectItem itemLabel="Project Budget" itemValue="Project Budget" />
                        <f:selectItem itemLabel="Marketing Budget" itemValue="Marketing Budget" />
                        <f:selectItem itemLabel="Training and Development Budget" itemValue="Training and Development Budget" />
                        <f:selectItem itemLabel="Travel and Expenses Budget" itemValue="Travel and Expenses Budget" />
                        <f:selectItem itemLabel="Research and Development Budget" itemValue="Research and Development Budget" />
                        <f:selectItem itemLabel="Sales and Revenue Budget" itemValue="Sales and Revenue Budget" />
                        <f:selectItem itemLabel="Contingency Budget" itemValue="Contingency Budget" />
                    </p:selectOneMenu>
                </p:column>
                <p:column>
                    <p:commandButton id="btn" value="Search" action="${searchbean.find()}" update="searchForm" />
                </p:column>
            </p:panelGrid>
        </p:panel>
            <p:panel id="DisplayPanel" header="Budget List">
                <p:dataTable id="table" var="displayData" value="${searchbean.find()}">
<!--                    <p:column headerText="Employee ID" style="display:none;">-->
<!--                        <h:outputText value="${displayData.employee_id}" />-->
<!--                    </p:column>-->
                    <p:column headerText="ID" width="20px">
                        <p:outputLabel id="budget_id" value="${displayData.budget_id}" />
                    </p:column>
                    <p:column headerText="Budget Type">
                        <p:outputLabel id="budget_type" value="${displayData.budget_type}" />
                    </p:column>
                    <p:column headerText="Date">
                        <p:outputLabel id="budget_date" value="${displayData.budget_date}" />
                    </p:column>
                    <p:column headerText="Amount">
                        <p:outputLabel id="budget_amount" value="${displayData.budget_amount}" />
                    </p:column>
                    <p:column headerText="Status">
                        <p:outputLabel id="budget_status" value="${displayData.budget_status}" />
                    </p:column>
                    <p:column headerText="Actions">
                        <h:panelGroup>
                            <p:commandButton icon="pi pi-search" value="View" action="#{searchbean.selectedBudget(displayData.employee_id, displayData.budget_id)}" ajax="true" styleClass="rounded-button ui-button-help" oncomplete="PF('viewDetailsDialog').show()">
                                <f:setPropertyActionListener target="#{searchbean.selectedEmployeeId}" value="#{displayData.employee_id}" />
                                <f:setPropertyActionListener target="#{searchbean.selectedBudgetId}" value="#{displayData.budget_id}" />
                            </p:commandButton>
                        </h:panelGroup>
                    </p:column>
                </p:dataTable>
            </p:panel>
        </h:form>
    </div>

    <p:dialog header="Employee Details" widgetVar="viewDetailsDialog" modal="true" dynamic="true" closable="true" visible="false" width="500" height="500" styleClass="dialog-position" onHide="redirectToDisplayBudgetList()">
        <!--            <f:event listener="#{displayDetails.displayDataDetails()}" type="preRenderComponent" />-->
        <p:accordionPanel multiple="true" widgetVar="multiple">
            <p:tab title="Employee Details" styleClass="tab-title">
                <h4>Employee Details</h4>
                <div class="grid-container">
                    <div class="grid-item">
                        <h:outputLabel value="First Name" /><br></br>
                        <p:inputText id="firstName" readonly="true" value="#{displayDetails.displayData.employee_fname}" styleClass="input-field" />
                        <h:message for="firstName"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Last Name" /><br></br>
                        <p:inputText id="lastName" readonly="true" value="#{displayDetails.displayData.employee_lname}" styleClass="input-field" />
                        <h:message for="lastName"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Username" /><br></br>
                        <p:inputText id="username" readonly="true" value="#{displayDetails.displayData.employee_username}" styleClass="input-field" />
                        <h:message for="username"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Email" /><br></br>
                        <p:inputText id="userEmail" readonly="true" value="#{displayDetails.displayData.employee_email}" styleClass="input-field" />
                        <h:message for="userEmail"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Group" /><br></br>
                        <p:inputText id="userGroup" readonly="true" value="#{displayDetails.displayData.employee_group}" styleClass="input-field" />
                        <h:message for="userGroup"></h:message>
                        <br></br><br></br>
                    </div>
                </div>
            </p:tab>
            <p:tab title="Budget Details" styleClass="tab-title">
                <h4>Budget Details</h4>
                <div class="grid-container">
                    <div class="grid-item">
                        <h:outputLabel value="Budget Type" /><br></br>
                        <p:inputText id="budgetType" readonly="true" value="#{displayDetails.displayData.budget_type}" styleClass="input-field" />
                        <h:message for="budgetType"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Date" /><br></br>
                        <p:inputText id="budgetDate" readonly="true" value="#{displayDetails.displayData.budget_date}" styleClass="input-field" />
                        <h:message for="budgetDate"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Amount (RM)" /><br></br>
                        <p:inputText id="budgetAmount" readonly="true" value="#{displayDetails.displayData.budget_amount}" styleClass="input-field" />
                        <h:message for="budgetAmount"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Remarks" /><br></br>
                        <p:inputText id="budgetRemarks" readonly="true" placeholder="No Remarks" value="#{displayDetails.displayData.budget_remarks}" styleClass="input-field" />
                        <h:message for="budgetRemarks"></h:message>
                        <br></br><br></br>
                    </div>
                    <div class="grid-item">
                        <h:outputLabel value="Status" /><br></br>
                        <p:inputText id="budgetStatus" readonly="true" value="#{displayDetails.displayData.budget_status}" styleClass="input-field" />
                        <h:message for="budgetStatus"></h:message>
                        <br></br><br></br>
                    </div>
                </div>
            </p:tab>
        </p:accordionPanel>
    </p:dialog>

    <footer>
        <ui:include src="include/footer.xhtml" />
    </footer>

    <script>
    function redirectToDisplayBudgetList() {
        window.location.href = "budgetList.xhtml";
    }
    </script>
</h:body>
</html>